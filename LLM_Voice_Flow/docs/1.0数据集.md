# 智能座舱对话格式训练数据集设计

## 目录
- [智能座舱对话格式训练数据集设计](#智能座舱对话格式训练数据集设计)
  - [目录](#目录)
  - [数据集概述](#数据集概述)
    - [设计目标](#设计目标)
    - [对话格式](#对话格式)
    - [数据集结构](#数据集结构)
  - [对话格式说明](#对话格式说明)
    - [Prompt模板结构](#prompt模板结构)
      - [1. Role定义](#1-role定义)
      - [2. Task说明](#2-task说明)
      - [3. Requirements要求](#3-requirements要求)
      - [4. 历史信息格式](#4-历史信息格式)
  - [意图分类体系](#意图分类体系)
    - [核心意图类别](#核心意图类别)
  - [环境信息显示对话](#环境信息显示对话)
    - [温湿度显示](#温湿度显示)
    - [时间显示](#时间显示)
  - [音乐播放控制对话](#音乐播放控制对话)
    - [音乐播放](#音乐播放)
  - [音量控制对话](#音量控制对话)
    - [音量调节](#音量调节)
  - [地图导航对话](#地图导航对话)
    - [导航功能](#导航功能)
  - [倒车监控对话](#倒车监控对话)
    - [倒车辅助](#倒车辅助)
  - [天气查询对话](#天气查询对话)
    - [天气信息](#天气信息)
  - [多轮对话场景](#多轮对话场景)
    - [复杂多轮交互](#复杂多轮交互)
  - [数据集规模与分布](#数据集规模与分布)
    - [数据量建议](#数据量建议)
    - [多轮对话分布](#多轮对话分布)
    - [数据质量要求](#数据质量要求)
    - [评估指标](#评估指标)
  - [总结](#总结)

## 数据集概述

### 设计目标
基于Chat Format构建智能座舱对话数据集，支持多轮对话、上下文理解和意图识别，确保驾驶安全的前提下提供自然的语音交互体验。

### 对话格式
```json
{
  "messages": [
    {
      "role": "user",
      "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n{history}\n\n# 当前query\n{user_input}"
    },
    {
      "role": "assistant",
      "content": "{intent}###{command}"
    }
  ]
}
```

### 数据集结构
```
intelligent_cockpit_chat_dataset/
├── environment_display/  # 温湿度、时间显示对话
├── music_control/        # 音乐播放控制对话
├── volume_control/       # 音量控制对话
├── navigation/           # 地图导航对话
├── parking_assist/       # 倒车监控对话
├── weather_query/        # 天气查询对话
├── general_commands/     # 通用指令对话
├── multiturn/            # 多轮对话场景
└── mixed_scenarios/      # 混合场景对话
```

## 对话格式说明

### Prompt模板结构

#### 1. Role定义
```
你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图
```

#### 2. Task说明
```
1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令
2. 意图需要在预定义类别中选择
```

#### 3. Requirements要求
```
1. 不要废话，输出简洁
2. 输出格式为【意图】###【指令】
```

#### 4. 历史信息格式
```
用户：{previous_user_input}
助手：{previous_assistant_response}
用户：{current_user_input}
```

## 意图分类体系

### 核心意图类别
```json
{
  "intent_categories": [
    "温湿度显示",     // 显示车内温度和湿度信息
    "时间显示",       // 显示当前时间
    "音乐播放",       // 网络音乐下载、本地音乐播放、上一首/下一首/单曲循环
    "音量控制",       // 音量调节、静音
    "地图导航",       // 地图导航、GPS地图显示、地图缩放显示
    "倒车监控",       // 倒车视频监控、倒车距离预警显示
    "天气查询",       // 天气信息查询
    "通用指令",       // 基础对话、问候、其他通用功能
    "拒识"            // 无法识别或不支持的指令
  ]
}
```

## 环境信息显示对话

### 温湿度显示
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n显示温湿度"
      },
      {
        "role": "assistant",
        "content": "温湿度显示###显示温湿度"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n车内温度是多少"
      },
      {
        "role": "assistant",
        "content": "温湿度显示###显示车内温度"
      }
    ]
  }
]
```

### 时间显示
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n显示时间"
      },
      {
        "role": "assistant",
        "content": "时间显示###显示时间"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n现在几点了"
      },
      {
        "role": "assistant",
        "content": "时间显示###显示当前时间"
      }
    ]
  }
]
```

## 音乐播放控制对话

### 音乐播放
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n播放音乐"
      },
      {
        "role": "assistant",
        "content": "音乐播放###播放音乐"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n下载周杰伦的歌曲"
      },
      {
        "role": "assistant",
        "content": "音乐播放###下载周杰伦的歌曲"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n用户：播放音乐\n助手：正在为您播放音乐，当前播放周杰伦的《稻香》\n\n# 当前query\n下一首"
      },
      {
        "role": "assistant",
        "content": "音乐播放###切换到下一首歌曲"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n单曲循环"
      },
      {
        "role": "assistant",
        "content": "音乐播放###设置单曲循环模式"
      }
    ]
  }
]
```

## 音量控制对话

### 音量调节
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n音量调大一点"
      },
      {
        "role": "assistant",
        "content": "音量控制###音量调大一点"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n用户：音量调大一点\n助手：正在为您调大音量\n\n# 当前query\n太大了，调小点"
      },
      {
        "role": "assistant",
        "content": "音量控制###调小音量"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n静音"
      },
      {
        "role": "assistant",
        "content": "音量控制###静音"
      }
    ]
  }
]
```

## 地图导航对话

### 导航功能
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n导航到最近的加油站"
      },
      {
        "role": "assistant",
        "content": "地图导航###导航到最近的加油站"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n显示GPS地图"
      },
      {
        "role": "assistant",
        "content": "地图导航###显示GPS地图"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n用户：显示GPS地图\n助手：正在为您显示GPS地图\n\n# 当前query\n放大地图"
      },
      {
        "role": "assistant",
        "content": "地图导航###放大地图显示"
      }
    ]
  }
]
```

## 倒车监控对话

### 倒车辅助
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n显示倒车影像"
      },
      {
        "role": "assistant",
        "content": "倒车监控###显示倒车影像"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n显示倒车距离预警"
      },
      {
        "role": "assistant",
        "content": "倒车监控###显示倒车距离预警"
      }
    ]
  }
]
```

## 天气查询对话

### 天气信息
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n今天天气怎么样"
      },
      {
        "role": "assistant",
        "content": "天气查询###查询今天天气"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n\n# 当前query\n明天会下雨吗"
      },
      {
        "role": "assistant",
        "content": "天气查询###查询明天是否下雨"
      }
    ]
  }
]
```

## 多轮对话场景

### 复杂多轮交互
```json
[
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n用户：播放音乐\n助手：正在为您播放音乐，当前播放周杰伦的《稻香》\n用户：下一首\n助手：正在切换到下一首歌曲\n\n# 当前query\n声音太大了"
      },
      {
        "role": "assistant",
        "content": "音量控制###调小音量"
      }
    ]
  },
  {
    "messages": [
      {
        "role": "user",
        "content": "# Role\n你是智能座舱的智能助手，能轻松的把用户的指令转换成清晰的意图\n\n# Task\n1. 需要结合多轮历史信息将输入的用户指令转换成意图和简洁指令，若无多轮历史信息或当前用户指令语义完整则无需改写，否则需根据历史信息进行指令改写\n2. 意图需要在[温湿度显示、时间显示、音乐播放、音量控制、地图导航、倒车监控、天气查询、通用指令、拒识]中选择\n\n# Requirements\n1. 不要废话，输出简洁\n2. 输出格式为【意图】###【指令】\n\n# 多轮历史信息\n用户：导航到机场\n助手：正在为您规划到机场的路线\n用户：显示GPS地图\n助手：正在为您显示GPS地图\n\n# 当前query\n放大一点"
      },
      {
        "role": "assistant",
        "content": "地图导航###放大地图显示"
      }
    ]
  }
]
```



## 数据集规模与分布

### 数据量建议
```
总数据量: 8000-12000条对话
- 音乐播放: 2000条 (25%)
  - 本地音乐播放: 800条
  - 网络音乐下载: 600条
  - 播放控制(上一首/下一首/循环): 600条
- 地图导航: 2000条 (25%)
  - 导航功能: 1000条
  - GPS地图显示: 600条
  - 地图缩放: 400条
- 音量控制: 1200条 (15%)
- 环境信息显示: 1000条 (12.5%)
  - 温湿度显示: 600条
  - 时间显示: 400条
- 倒车监控: 800条 (10%)
  - 倒车视频监控: 500条
  - 倒车距离预警: 300条
- 天气查询: 600条 (7.5%)
- 多轮对话: 400条 (5%)
```

### 多轮对话分布
```
多轮轮次分布:
- 2轮对话: 40%
- 3轮对话: 35%
- 4轮对话: 20%
- 5轮以上: 5%

上下文类型:
- 指代消解: 30%
- 指令补全: 25%
- 连续操作: 25%
- 跨领域切换: 20%
```

### 数据质量要求
1. **格式一致性**：所有数据使用统一的chat format
2. **Prompt标准化**：Role、Task、Requirements保持一致
3. **意图覆盖完整**：9个意图类别全覆盖
4. **多轮场景丰富**：涵盖各种上下文依赖场景
5. **指令改写准确**：基于历史信息的合理改写
6. **安全性优先**：驾驶安全相关指令优先级最高

### 评估指标
```
对话格式特定指标:
- 意图识别准确率: >95%
- 指令改写准确率: >90%
- 多轮理解准确率: >88%
- 上下文一致性: >92%
- 格式输出正确率: >99%
```

## 总结

智能座舱对话格式数据集采用现代Chat Format设计，具备以下核心优势：

1. **标准化兼容**：与主流LLM生态完全兼容
2. **多轮对话原生支持**：自然处理上下文依赖
3. **Prompt Engineering集成**：业务规则直接嵌入
4. **意图识别精准**：9类核心意图全覆盖
5. **指令改写智能**：基于历史信息的语义补全
6. **功能聚焦实用**：专注于实际支持的核心功能

该数据集设计将显著提升智能座舱的**多轮对话理解能力**和**意图识别精度**，为用户提供更自然、更智能的车载语音交互体验。支持的核心功能包括：温湿度显示、时间显示、音乐播放控制、音量控制、地图导航、倒车监控和天气查询等实用功能。